<load target="./filter/change_language.xml" />
<load target="./filter/change_layout.xml" />
<load target="filter/update_index_mid.xml" />
<include target="_header.html" />
<section class="section">
	<h1>{$lang->cafe_info}</h1>
	<form method="post" action="{Context::getRequestUri()}" enctype="multipart/form-data" class="x_form-horizontal">
		<input type="hidden" name="vid" value="{$site_module_info->domain}" cond="isSiteID($site_module_info->domain)" />
		<input type="hidden" name="site_srl" value="{$homepage_info->site_srl}" />
		<input type="hidden" name="module" value="homepage" />
		<input type="hidden" name="act" value="procHomepageInsertCafeBanner" />
		<div class="x_control-group">
			<label for="cafe_title" class="x_control-label">{$lang->cafe_title}</label>
			<div class="x_controls">
				<input type="text" name="cafe_title" id="cafe_title" value="{htmlspecialchars($homepage_info->title)}" />
			</div>
		</div>
		<div class="x_control-group">
			<label for="cafe_description" class="x_control-label">{$lang->cafe_description}</label>
			<div class="x_controls">
				<textarea name="cafe_description" id="cafe_description">{htmlspecialchars($homepage_info->cafe_description)}</textarea>
			</div>
		</div>
		<div class="x_control-group">
			<label for="cafe_banner" class="x_control-label">{$lang->cafe_banner}</label>
			<div class="x_controls">
				<p><img cond="$homepage_info->cafe_banner" src="{$homepage_info->cafe_banner}" alt="cafe banner" /></p>
				<input type="file" name="cafe_banner" id="cafe_banner" value="" />
			</div>
		</div>
		<div class="btnArea">
			<input type="submit" value="{$lang->cmd_save}" class="x_btn x_btn-primary" />
		</div>
	</form>
</section>
<section class="section">
	<h1>{$lang->cmd_select_index}</h1>
	<form method="post" action="./" onsubmit="return procFilter(this,update_index_mid)" class="x_form-horizontal">
		<div class="x_control-group">
			<label for="index_mid" class="x_control-label">{$lang->cmd_select_index}</label>
			<div class="x_controls">
				<select name="index_mid" id="index_mid">
					<option loop="$mid_list => $no,$val" value="{$val->module_srl}" selected="selected"|cond="$val->module_srl==$homepage_info->module_srl">{$val->browser_title} ({$val->mid})</option>
				</select>
			</div>
		</div>
		<div class="btnArea">
			<input type="submit" value="{$lang->cmd_save}" class="x_btn x_btn-primary" />
		</div>
	</form>
</section>
<section class="section">
	<h1>{$lang->default_language}</h1>
	<form action="./" method="get" onsubmit="return procFilter(this, change_language);" class="x_form-horizontal">
		<div class="x_control-group">
			<label for="language" class="x_control-label">{$lang->default_language}</label>
			<div class="x_controls">
				<select name="language" id="language">
					<option loop="$lang_supported => $key,$val" value="{$key}" selected="selected"|cond="$key==$site_module_info->default_language">{$val}</option>
				</select>
				<a href="#about_default_language" data-toggle class="x_icon-question-sign">{$lang->help}</a>
				<p class="x_help-block" id="about_default_language" hidden>{$lang->about_default_language}</p>
			</div>
		</div>
		<div class="btnArea">
			<input type="submit" value="{$lang->cmd_save}" class="x_btn x_btn-primary" />
		</div>
	</form>
</section>
<section class="section">
	<h1>{$lang->layout}</h1>
	<form action="./" method="post" onsubmit="return procFilter(this, change_layout);" class="x_form-horizontal">
		<div class="x_control-group" cond="$homepage_config->enable_change_layout == 'Y'">
			<label for="layout" class="x_control-label">{$lang->layout}</label>
			<div class="x_controls">
				<select name="layout" id="layout">
					<option value="faceoff">faceoff</option>
					<optgroup label="{$lang->downloaded_list}">
						<option loop="$layout_list => $key,$val" value="{$val->layout}" selected="selected"|cond="$selected_layout->layout == $val->layout"><!--@if($val->title)-->{$val->title}({$val->layout})<!--@else-->{$val->layout}<!--@end--></option>
					</optgroup>
				</select>
				<input type="submit" value="{$lang->cmd_change_layout}" class="x_btn" />
			</div>
		</div>
		<div class="x_control-group" cond="$homepage_config->enable_change_layout == 'Y'" style="border-bottom:1px dotted #ddd">
			<label class="x_control-label">{$lang->path}</label>
			<div class="x_controls" style="padding-top:5px">
				{$selected_layout->path}
			</div>
		</div>
	</form>
	<form id="fo_layout" action="./" method="post" enctype="multipart/form-data" target="hidden_iframe" class="x_form-horizontal">
		<input type="hidden" name="module" value="homepage" />
		<input type="hidden" name="vid" value="{$vid}" />
		<input type="hidden" name="act" value="procHomepageLayoutUpdate" />
		<input type="hidden" name="layout_srl" value="{$selected_layout->layout_srl}" />
		<input type="hidden" name="title" value="{htmlspecialchars($homepage_info->title)}" />
		<input type="hidden" name="apply_layout" value="Y" />
		<input loop="$selected_layout->menu => $menu_name,$menu_info" type="hidden" name="{$menu_name}" value="{$menu_info->menu_srl}" />
		<div class="x_control-group">
			<label for="header_script" class="x_control-label">{$lang->header_script}</label>
			<div class="x_controls">
				<textarea name="header_script" id="header_script" style="vertical-align:top">{htmlspecialchars($selected_layout->header_script)}</textarea>
				<a href="#about_header_script" data-toggle class="x_icon-question-sign">{$lang->help}</a>
				<p class="x_help-block" id="about_header_script" hidden>{$lang->about_header_script}</p>
			</div>
		</div>
		<block loop="$selected_layout->extra_var => $name,$var">{@ $_rows[$var->group]++ }</block>
		<div class="x_control-group" loop="$selected_layout->extra_var => $name,$var">
			<block cond="$var->group && ((!$_group) || $_group != $var->group)">{@$_group_idx = 0;}{@$_group = $var->group}</block>
			<label for="{$name}" class="x_control-label">{$var->title}</label>
			<div class="x_controls">
				<input cond="$var->type == 'text'" type="text" name="{$name}" value="{htmlspecialchars($var->value)}"  id="{$name}" />
				<textarea cond="$var->type == 'textarea'" name="{$name}" id="vars_{$name}">{htmlspecialchars($var->value)}</textarea>
				<div cond="$var->type=='image' && $var->value">
					<img src="../../../{$var->value}" alt="image" /><br />
					<input type="checkbox" name="del_{$name}" value="Y" id="{$name}" />
					<label for="{$name}">{$lang->cmd_delete}</label>
				</div>
				<input cond="$var->type=='image'" type="file" name="{$name}" id="{$name}" value="" style="width:220px" />
				<select name="{$name}" id="{$name}" cond="$var->type == 'select'">
					<option loop="$var->options => $key,$val" value="{$key}" selected="selected"|cond="$key==$var->value">{$val->val}</option>
				</select>
				<a href="#about_{$name}" data-toggle class="x_icon-question-sign">{$lang->help}</a>
				<p class="x_help-block" id="about_{$name}" hidden>{$var->description}</p>
			</div>
		</div>
		<div class="btnArea">
			<input type="submit" value="{$lang->cmd_save}" class="x_btn x_btn-primary" />
		</div>
	</form>
</section>
<iframe name="hidden_iframe" hidden></iframe>
<include target="_footer.html" />
